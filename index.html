<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
</head>
<body>
<table class="table table-bordered">

    <tr>
        <td>210 TC</td>
        <td><strong>Final Rate</strong></td>
        <td></td>
        <td>Sale Purchase</td>
        <td>Date aayega idar</td>
    </tr>

    <tr>
        <td><strong>Weave</strong></td>
        <td><input type="text" name="weave" id="weave" placeholder="Weave"></td>
        <td><input type="text" name="customer_name" id="customer_name" placeholder="Customer Name"></td>
        <td>Quoted Price</td>
        <td><input type="number" name="quoted_price" id="quoted_price"></td>
    </tr>

    <tr>
        <td><strong>Width</strong></td>
        <td><input type="number" id="width" name="width" placeholder="Width"></td>
        <td><strong>Rate</strong></td>
        <td><strong>GST</strong></td>
        <td>W/O GST</td>
    </tr>

    <tr>
        <td><strong>Warp CBD</strong></td>
        <td><input type="number" name="warp_cbd" id="warp_cbd" placeholder="Warp CBD"></td>
        <td><input type="number" id="rate_1" name="rate_1" placeholder="Rate 1"></td>
        <td><input type="number" id="gst_1" name="gst_1" placeholder="GST 1"></td>
        <td id="w_o_gst_1">Will be calculated</td>
    </tr>

    <tr>
        <td><strong>Weft CBD</strong></td>
        <td><input type="number" name="weft_cbd" id="weft_cbd" placeholder="WEFT CBD"></td>
        <td><input type="number" id="rate_2" name="rate_2" placeholder="Rate 2"></td>
        <td><input type="number" id="gst_2" name="gst_2" placeholder="GST 2"></td>
        <td id="w_o_gst_2">Will be calculated</td>
    </tr>

    <tr>
        <td><strong>EPI</strong></td>
        <td><input type="number" name="epi" id="epi" placeholder="EPI"></td>
        <td id="epi_1">Will be calculated</td>
        <td colspan="2"><strong>Total cost of production</strong></td>
    </tr>

    <tr>
        <td><strong>PPI</strong></td>
        <td><input type="number" name="ppi" id="ppi" placeholder="PPI"></td>
        <td class="calculated" id="ppi_1">Will be calculated</td>
        <td>Warp cost</td>
        <td id="warp_cost">Will be calculated</td>
    </tr>

    <tr>
        <td><strong>Number of insertion</strong></td>
        <td><input type="number" name="number_of_insertion" id="number_of_insertion" placeholder="No. of Insertion">
        </td>
        <td></td>
        <td>Weft cost</td>
        <td id="weft_cost">Will be calculated</td>
    </tr>

    <tr>
        <td><strong>RS</strong></td>
        <td><input type="number" name="rs" id="rs" placeholder="RS"></td>
        <td class="calculated" id="rs_1">Will be calculated</td>
        <td>Sizing</td>
        <td class="calculated" id="sizing">Will be calculated</td>
    </tr>

    <tr>
        <td><strong>Shrinkage</strong></td>
        <td><input type="number" name="shrinkage" id="shrinkage" placeholder="Shrinkage"></td>
        <td></td>
        <td>Majuri</td>
        <td class="calculated" id="majuri">Will be calculated</td>
    </tr>

    <tr>
        <td><strong>Wastage</strong></td>
        <td><input type="number" name="wastage" id="wastage" placeholder="Wastage"></td>
        <td></td>
        <td>Total Cost</td>
        <td class="calculated" id="total_cost">Will be calculated</td>
    </tr>
    <tr>
        <td><strong>Sizing Rate</strong></td>
        <td><input type="number" name="sizing_rate" id="sizing_rate" placeholder="Sizing Rate"></td>
        <td></td>
        <td></td>
        <td></td>
    </tr>
    <tr>
        <td><strong>Pick Rate</strong></td>
        <td><input type="number" name="pick_rate" id="pick_rate" placeholder="Pick Rate"></td>
        <td></td>
        <td></td>
        <td></td>
    </tr>


</table>
<div>
    <button class="btn btn-primary float-end" onclick="calculate()">Calculate</button>
</div>

<script>

    function calculate(){

    console.log("function calculate called successfully")

    const w_o_gst_1 = document.getElementById("w_o_gst_1")
    const w_o_gst_2 = document.getElementById("w_o_gst_2")
    const epi_1 = document.getElementById("epi_1")
    const ppi_1 = document.getElementById("ppi_1")
    const warp_cost = document.getElementById("warp_cost")
    const weft_cost = document.getElementById("weft_cost")
    const sizing = document.getElementById("sizing")
    const majuri = document.getElementById("majuri")
    const total_cost = document.getElementById("total_cost")
    const rs_1 = document.getElementById("rs_1")

    const rate_1 = parseFloat(document.getElementById("rate_1").value)
    const rate_2 = parseFloat(document.getElementById("rate_2").value)
    const gst_1 = parseFloat(document.getElementById("gst_1").value)
    const gst_2 = parseFloat(document.getElementById("gst_2").value)
    const sizing_rate = parseFloat(document.getElementById("sizing_rate").value)

    const width = parseFloat(document.getElementById("width").value)
    const rs = parseFloat(document.getElementById("rs").value)
    const warp_cbd = parseFloat(document.getElementById("warp_cbd").value)
    const number_of_insertion = parseFloat(document.getElementById("number_of_insertion").value)
    const weft_cbd = parseFloat(document.getElementById("weft_cbd").value)
    const shrinkage = parseFloat(document.getElementById("shrinkage").value)
    const wastage = parseFloat(document.getElementById("wastage").value)
    const epi = parseFloat(document.getElementById("epi").value)
    const ppi = parseFloat(document.getElementById("ppi").value)
    const pick_rate = parseFloat(document.getElementById("pick_rate").value)

    rs_1.innerHTML = ((width + shrinkage) * epi)


    w_o_gst_1.innerHTML = (rate_1 / (1 + gst_1 / 100))
    w_o_gst_2.innerHTML = (rate_2 / (1 + gst_2 / 100))

    epi_1.innerHTML = ((((width + rs) * epi)/1693.333/warp_cbd) * (1 + (shrinkage / 100)))
    ppi_1.innerHTML = (((((width + rs) * ppi)/1693.333/weft_cbd) * (1 + (wastage / 100))) * number_of_insertion)

    // Total cost of production
    console.log("1", epi_1.innerHTML)
    console.log("2", epi_1.innerHTML * ppi_1.innerHTML)
    console.log("3", epi_1.innerHTML, w_o_gst_1.innerHTML)

    warp_cost.innerHTML = (epi_1.innerHTML * w_o_gst_1.innerHTML)
    weft_cost.innerHTML = (ppi_1.innerHTML * w_o_gst_2.innerHTML)
    sizing.innerHTML = (sizing_rate * epi_1.innerHTML)
    console.log("4","ppi", ppi, "pickrate", pick_rate)
    majuri.innerHTML = (ppi * pick_rate)
    console.log("5", warp_cost.innerHTML , weft_cost.innerHTML ,sizing.innerHTML,majuri.innerHTML)
    total_cost.innerHTML = (parseFloat(warp_cost.innerHTML) + parseFloat(weft_cost.innerHTML) + parseFloat(sizing.innerHTML) + parseFloat(majuri.innerHTML))
    }
</script>
</body>
</html>
